<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Hướng dẫn viết App cho Onshop</title>
    <link rel="stylesheet" href="src/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="src/bootstrap/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="src/css/style.css">
    <link rel="stylesheet" href="src/css/codemirror.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script type="text/javascript" src="src/js/codemirror.js"></script>
    <script src="src/codemirror/mode/php/php.js"></script>
    <script src="src/codemirror/mode/xml/xml.js"></script>
    <script src="src/codemirror/mode/clike/clike.js"></script>

</head>
<body>
<div class="wrapper d-flex align-items-stretch">
    <nav id="sidebar">
        <div class="p-4 pt-5 nav-link">
            <div class="logo">
                <img src="src/img/logo.png">
            </div>
            <h1><a href="index.html" class="logo">Appstore</a></h1>
            <ul class="list-unstyled components mb-5">
                <li class="active">
                    <a href="#introduce">Giới thiệu</a>
                </li>
                <li>
                    <a href="#structure">Cấu trúc & mô hình</a>
                </li>
                <li>
                    <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Khái
                        niệm & Quy ước</a>
                    <ul class="collapse list-unstyled" id="pageSubmenu">
                        <li>
                            <a href="#">App code</a>
                        </li>
                        <li>
                            <a href="#">Module</a>
                        </li>
                        <li>
                            <a href="#">Controller & Đường dẫn</a>
                        </li>
                        <li>
                            <a href="#">Model</a>
                        </li>
                        <li>
                            <a href="#">View</a>
                        </li>
                        <li>
                            <a href="#">Layout</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#pageSubmenu2" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Chi
                        tiết</a>
                    <ul class="collapse list-unstyled" id="pageSubmenu2">
                        <li>
                            <a href="#">Cài đặt ứng dụng</a>
                        </li>
                        <li>
                            <a href="#">Gỡ ứng dụng</a>
                        </li>
                        <li>
                            <a href="#">Thêm module</a>
                        </li>
                        <li>
                            <a href="#">Chỉnh sửa module</a>
                        </li>
                        <li>
                            <a href="#">Xóa module</a>
                        </li>
                        <li>
                            <a href="#">Cài đặt vị trí hiển thị</a>
                        </li>
                        <li>
                            <a href="#">Lấy danh sách modules</a>
                        </li>
                        <li>
                            <a href="#">Lấy dữ liệu của Shop</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">Hiển thị ứng dụng</a>
                </li>
            </ul>

            <div class="mb-5">
                <h3 class="h6">Subscribe for newsletter</h3>
                <form action="#" class="colorlib-subscribe-form">
                    <div class="form-group d-flex">
                        <div class="icon"><span class="icon-paper-plane"></span></div>
                        <input type="text" class="form-control" placeholder="Enter Email Address">
                    </div>
                </form>
            </div>

            <div class="footer">
                <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    Copyright &copy;<script>document.write(new Date().getFullYear());</script>
                    All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a
                            href="https://colorlib.com" target="_blank">Colorlib.com</a>
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
            </div>

        </div>
    </nav>

    <!-- Page Content  -->
    <div id="content" class="p-4 p-md-5 pt-5">
        <div class="custom-menu">
            <button type="button" id="sidebarCollapse" class="btn btn-primary">
                <i class="fa fa-bars"></i>
                <span class="sr-only">Toggle Menu</span>
            </button>
        </div>
        <section id="introduce">
            <div class="section-title">
                <h2 class="mb-4">Giới thiệu</h2>
            </div>
            <div class="section-content">
                <p>
                    Hơn 20000 người bán hàng sử dụng Onshop để khởi tạo, quản lý và phát triển kinh doanh online.
                    Họ xây dựng website bán hàng chuẩn UI/UX, kết nối nền tảng bán hàng trên website với mạng xã hội,
                    các sàn thương mại điện tử, bán tại cửa hàng và quản lý với một nền tảng quản trị hợp nhất.
                    Họ có nhiều mô hình kinh doanh độc đáo với nhiều quy mô từ khắp mọi miền trên cả nước.
                    Onshop giúp người bán hàng giải quyết nhiều vấn đề khó khăn của họ trong những lĩnh vực kinh doanh khác nhau,
                    nhưng mọi người bán đều có những nhu cầu riêng biệt.
                </p>
                <p>
                    Đó là lý do kho ứng dụng ra đời.
                </p>
                <p>
                    Sứ mệnh của Onshop là đồng hành cùng người bán khởi tạo, quản lý và phát triển kinh doanh online..
                    Nhưng chúng tôi không thể làm tất cả mọi thứ, thay vào đó, Onshop trao quyền cho các đối tác bên
                    thứ ba để tạo ra các ứng dụng được xây dựng trên nền tảng Onshop. Bằng cách đó, người bán hàng có
                    nhiều lựa chọn hơn tùy theo nhu cầu và các nhà phát triển có thể xây dựng ứng dụng hỗ trợ những người
                    bán hàng đó. Điều này tạo ra các cơ hội kinh doanh mới và mang lại lợi ích cho người bán hàng, đối tác phát triển và Onshop
                </p>
                <p>
                    Chúng tôi cung cấp các API và bộ tài liệu hướng dẫn để các đối tác xây dựng ứng dụng một cách tốt nhất.
                </p>
            </div>
        </section>
        <section id="structure">
            <div class="section-title">
                <h2 class="mb-4">Cấu trúc & mô hình</h2>
            </div>
            <div class="section-content">
                <p>Các ứng dụng trên App Store được viết và đóng gói thành các chương trình để cài đặt trên hệ thống của
                    Onshop.</p>
                <p>Ứng dụng sử dụng mô hình MVC với cấu trúc thư mục như sau: </p>
                <div class="feature-img">
                    <img src="src/img/structure.jpg">
                </div>
                <p></p>
                <p>Cấu trúc đường dẫn đến thư mục "appstore" ở các luồng là cấu trúc mặc đinh.
                    Nhà phát triển chỉ triển khai viết ứng dụng theo mô hình MVC bên trong các thư mục "appstore"
                    này. </p>
                <h4>Admin</h4>
                <p>Source code nằm trong thư mục cha "admin" giúp quản lý hệ thống cài đặt, cấu hình các thông tin cần
                    thiết cho ứng dụng.</p>
                <p>Nhà phát triển sẽ được cung cấp 1 số function giành cho các chứng năng mặc định cho ứng dụng
                    như: </p>
                <p>- Cặt đặt ứng dụng</p>
                <p>- Gỡ ứng dụng</p>
                <p>- Cài đặt vị trí hiển thị của ứng dụng</p>
                <p>- Phương thức lấy dữ liệu của hệ thống</p>
                <h4>Catalog</h4>
                <p>Source code nằm trong thư mục cha "catalog" là phần sẽ thể hiện chức năng của ứng dụng đối với người
                    dùng website .</p>
                <p>Mô hình MVC hoạt động riêng rẽ tương ứng với thành phần trong Admin và Catalog. </p>
            </div>
        </section>
        <section id="concept">
            <div class="section-title">
                <h2 class="mb-4">Các khái niệm, quy ước</h2>
            </div>
            <div class="section-content">
                <div class="content-group">
                    <h4>App code</h4>
                    <p>App code là tên mã của ứng dụng của bạn, thường được đặt theo tên viết tắt của ứng dụng. </p>
                    <p>- Ví dụ: Tên ứng dụng là Flash Sale thì app code sẽ là flash_sale</p>
                    <p>Mã app_code là định danh quan trọng, và là duy nhất để phân biệt các app khác nhau trên hệ thống
                        App Store của Onshop.</p>
                    <h4>Module</h4>
                    <p>Ứng dụng của bạn, nếu muốn cung cấp chức năng và hiển thị để cho người dùng website thao tác thì
                        cần tạo các thành phần (Module) cho ứng dụng
                        và cấu hình vị trí hiển thị trên website.</p>
                    <p>Onshop sẽ cung cấp các phương thức để nhà phát triển có thể :</p>
                    <p> - Tạo module cho ứng dụng.</p>
                    <p> - Xóa/ chỉnh sửa module.</p>
                    <p> - Cấu hình vị trí hiển thị module trên website.</p>
                </div>
                <div class="content-group">
                    <h4>Controller & đường dẫn</h4>
                    <p>Cấu trúc đường dẫn của ứng dụng sẽ là đường dẫn đến controller và function của nó.</p>
                    <p>- Ví dụ: Bạn có function getHelloWorld trong controller flash_sale thì đường dẫn để gọi function
                        này là: </p>
                    <div class="group-code">
                        <p>
                            route=extension/appstore/flash_sale/getHelloWorld&user_token=EtLyM37n1QtE9TcuWif5EyHqdLqGvoHt</p>
                    </div>
                    <p>- user_token là param mặc định luôn phải có trong cấu trúc mỗi đường dẫn của ứng dụng</p>
                    <p>Cách tạo 1 đường dẫn đầy đủ</p>
                    <div class="group-code">
                        <p>
                            $url = $this->url->link('extension/appstore/flash_sale/getHelloWorld', 'user_token=' .
                            $this->session->data['user_token'], true)
                        </p>
                    </div>
                </div>
                <div class="content-group">
                    <h4>Model</h4>
                    <p>Model thể hiện rõ các thao tác với cơ sở dữ liệu, để sử dụng được model các bạn sử dụng phương
                        thức load như sau:</p>
                    <div class="group-code">
                        <p>// Load model</p>
                        <p>$this->load->model('extension/appstore/flash_sale');</p>
                        <p>// Call function in Model</p>
                        <p>$this->model_extension_appstore_flash_sale->createTables();</p>
                    </div>
                    <p>Lưu ý: </p>
                    <p> - Bạn chỉ được phép load các model do chính bạn tạo ra.</p>
                    <p> - Tất cả dữ liệu khác sẽ được cung cấp bằng các thư viện sẽ được mô tả sau.</p>

                </div>
                <div class="content-group">
                    <h4>View</h4>
                    <p>Cũng giống như các mô hình MCV, đây là phần giao diện (theme) dành cho người sử dụng.</p>
                    <p>Để truyền dữ liệu từ controller ra view hãy sử dụng phương thức sau</p>
                    <div class="group-code">

                        <p>
                            $this->response->setOutput($this->load->view('extension/appstore/flash_sale/edit_module',$data));</p>
                    </div>
                </div>
                <div class="content-group">
                    <h4>Layout</h4>
                    <p>Là các thành phần được viết sẵn để bạn import vào giao diện của mình</p>
                    <p>Các layout mặc định và bắt buộc bao gồm: custom_header, footer, custom_column_left</p>
                    <p>Cách dùng:</p>
                    <div class="group-code">
                        <p>// Load các layout</p>
                        <p>$data['custom_header'] = $this->load->controller('common/custom_header');</p>
                        <p>$data['custom_column_left'] = $this->load->controller('common/custom_column_left');</p>
                        <p>$data['footer'] = $this->load->controller('common/footer');</p>
                        <p>// Truyền các layout ra view qua biến $data</p>
                        <p>
                            $this->response->setOutput($this->load->view('extension/appstore/flash_sale/edit_module',$data));</p>
                    </div>
                </div>
                <div class="content-group">
                    <h4>Language</h4>
                    <p>Onshop sử dụng ngôn ngữ Tiếng Việt và Tiếng Anh cho hệ thống, vì vậy các ứng dụng của bạn cần
                        được cấu hình cả 2 ngôn ngữ</p>
                    <p>Để làm điều này, Onshop cung cấp giải pháp rất đơn giản, và tiện ích. Nhà phát triển chỉ cần khai
                        báo các thành phần đa ngôn ngữ trong thư mục language theo 2 mục en-gb và vi-vn</p>
                    <div class="group-code">
<textarea class="code-area" name="code">
<?php
// Tiếng Anh: language/extension/appstore/en-gb/your_app_code.php
// Heading
$_['heading_title'] = 'App Name';

// Text
$_['text_module'] = 'Modules';
$_['text_success'] = 'Success: You have modified module Flash Sale !';
$_['text_content_top'] = 'Content Top';
$_['text_content_bottom'] = 'Content Bottom';
$_['text_column_left'] = 'Column Left';
$_['text_column_right'] = 'Column Right';

?>
</textarea>
                        <textarea class="code-area" name="code">
<?php
// Tiếng Việt: language/extension/appstore/vi-vn/your_app_code.php
// Heading
$_['heading_title'] = 'App Name';

// Text
$_['text_module'] = 'Chương trình';
$_['text_success'] = 'Thành công: Bạn đã cài đặt chương trình thành công !';
$_['text_content_top'] = 'Nội dung đầu trang';
$_['text_content_bottom'] = 'Nội dung cuối trang';
$_['text_column_left'] = 'Cột trái';
$_['text_column_right'] = 'Cột phải';

?>
</textarea>
                        <p>Sử dụng: Tại controller bạn hãy load file language, hệ thống sẽ dựa vào ngôn ngữ hiện tại của
                            hệ thống để chọn file ngôn ngữ phù hợp</p>
                        <p>Lúc này tại view bạn chỉ cần hiển thị các biến ngôn ngữ phù hợp như đã khai báo</p>
                        <textarea class="code-area" name="code">
<?php
class ControllerExtensionAppstoreYourAppCode extends Controller
{
// Load file ngôn ngữ, hệ thống đã mặc định load tất cả biến cấu hình ngôn ngữ và truyền ra view
$this->load->language('extension/appstore/your_app_code');
// Bạn cũng có thể lấy giá trị 1 biến cấu hình cụ thể bằng phương thức get
$this->document->setTitle($this->language->get('heading_title'));
}

?>
</textarea>
                        <p>Lúc này tại view hiển thị đơn giản là show biến cấu hình phù hợp</p>
                        <textarea class="code-area" name="code">
<h1 class="page-title float-left">
    {{ heading_title }}
</h1>
<tr>
    <td class="text-left">{{ text_column_name }}</td>
    <td class="text-left">{{ text_column_status }}</td>
    <td class="text-right">{{ text_column_action }}</td>
</tr>
</textarea>
                    </div>
                </div>
            </div>
        </section>
        <section id="introduce3">
            <div class="section-title">
                <h2 class="mb-4">Chi tiết</h2>
            </div>
            <div class="section-content">
                <div class="content-group">
                    <h4>Cài đặt ứng dụng</h4>
                    <p> - Tất cả các ứng dụng để được cài đặt lên Appstore của Onshop thì tại file controller trong
                        Admin: admin\controller\extension\appstore\{your_app_code.php} đều phải có hàm install</p>
                    <p> - Hàm install này nhà phát triển có thể khai báo để tiến hành khởi tạo các bảng dữ liệu cần
                        thiết cho ứng dụng của bạn. </p>
                    <p> - Tại đây hãy tiến hành cập nhật tên ứng dụng và logo ứng dụng theo hướng dẫn.</p>
                    <p> - Ảnh kích thước 200*200px</p>
                    <p> - Nếu ứng dụng của bạn cần sử dụng các file asset (css,js) riêng để hỗ trợ người dùng thao tác
                        với ứng dụng, hãy khai báo cài đặt các file này.</p>
                    <div class="group-code">
<textarea class="code-area" name="code">
<?php
// Import thư viện App_Setting
use App_Api\App_Setting;
class ControllerExtensionAppstoreFlashSale extends Controller
{
    function install()
    {
        // Khởi tạo bảng dữ liệu
        $this->load->model('extension/appstore/your_app_code');
        $this->model_extension_appstore_your_app_code->createTables();

        // Update app_name & Logo
        $data = [
            "app_name" => "YOUR APP NAME",
            "path_logo" => "view/image/appstore/your_app_code.jpg"
        ];

        $setting = new App_Setting($this->registry);
        $setting->updateInfo("your_app_code",$data);

        // Khai báo đường dẫn file asset của bạn
        $asset = [
            "css" => [
                "catalog/view/theme/default/template/extension/appstore/asset/css/app_demo.css"
            ],
            "js" => [
                "catalog/view/theme/default/template/extension/appstore/asset/js/app_demo.js"
            ]
        ];
        // Thêm cấu hình file asset bằng hàm addAsset được cung cấp.
        $setting->addAsset("your_app_code",$asset);
    }
}
?>
</textarea>
                    </div>
                    <p>- Trong đó: flash_sale là app_code của ứng dụng</p>
                </div>
                <div class="content-group">
                    <h4>Gỡ ứng dụng</h4>
                    <p> - Tương tự như hàm install thì ứng dụng của bạn cũng bắt buộc cần có hàm uninstall để xóa các
                        bảng liên quan.</p>
                    <div class="group-code">
<textarea class="code-area" name="code">
<?php
// Import thư viện App_Config
use App_Api\App_Config;
class ControllerExtensionAppstoreYourAppCode extends Controller
{
    function uninstall()
    {
        /* Gỡ ứng dụng (bắt buộc) */
        $config = new App_Config($this->registry);
        $config->unRegisterApp('your_app_code');

        /* DROP các bảng đã thêm */
        $this->load->model('extension/appstore/your_app_code');
        $this->model_extension_appstore_your_app_code->dropTables();
    }
}
?>
</textarea>
                    </div>
                </div>
                <div class="content-group">
                    <p>Ở trên sử dụng các hàm dropTable() và createTables() thuộc model flash_sale, hãy định nghĩa 2 hàm
                        này trong model của bạn tại: admin\model\extension\appstore\flash_sale</p>
                    <div class="group-code">
                        <textarea class="code-area" name="code">
<?php
class ModelExtensionAppstoreFlashSale extends Model
{
    // Lưu ý tên bảng bắt buộc có tiền tố như sau
    // db_app + your_app_code + table name
    function createTables()
    {
        $this->db->query("CREATE TABLE IF NOT EXISTS " . DB_PREFIX . "db_app_flash_sale_product (
                id INT(11) NOT NULL AUTO_INCREMENT,
                product_id INT(11) NOT NULL,
                date_added DATETIME NOT NULL,
                date_published DATETIME NOT NULL,
                date_modified DATETIME NOT NULL,
                PRIMARY KEY (id)
            )
            COLLATE='utf8_general_ci'
            ENGINE=MyISAM;");
    }
    function dropTables(){
        $this->db->query("DROP TABLE IF EXISTS `" . DB_PREFIX . "db_app_flash_sale_product`");
    }
}
?>
</textarea>
                    </div>
                </div>
                <div class="content-group">
                    <h4>Trang giới thiệu ứng dụng</h4>
                    <p>Mỗi ứng dụng của bạn đều phải có 1 trang giới thiệu mặc định. Tại trang giới thiệu hãy hiển thị
                        thông tin ứng dụng với bố cục 3 phần:</p>
                    <p>- Phần 1: Logo app, tên app và đường dẫn đến trang chi tiết app</p>
                    <p>- Phần 2: Giới thiệu ngắn gọn</p>
                    <p>- Phần 3: Giới thiệu chi tiết app</p>
                    <p>Ứng dụng của bạn bắt buộc có hàm introduce() như ví dụ sau:</p>
                    <div class="group-code">
<textarea class="code-area" name="code">
<?php

class ControllerExtensionAppstoreYourAppCode extends Controller
{
    function introduce()
    {
        $this->load->language('extension/appstore/app_demo');
        $this->document->setTitle($this->language->get('heading_title_description'));

        // Load logo app
        $data['app_logo'] = "view/image/appstore/app_demo.jpg";

        // Link to detail app
        $data['link_to_app'] = $this->url->link('extension/appstore/app_demo', 'user_token=' . $this->session->data['user_token'] , true);

        // Import default layoyt
        $data['custom_header'] = $this->load->controller('common/custom_header');
        $data['custom_column_left'] = $this->load->controller('common/custom_column_left');
        $data['footer'] = $this->load->controller('common/footer');

        // Return view of introduce page
        $this->response->setOutput($this->load->view('extension/appstore/app_demo/introduce', $data));
    }
}
?>
</textarea>
                    </div>
                    <p>Ví dụ trang giới thiệu App Demo</p>
                    <div class="feature-img">
                        <img src="src/img/introduce.png">
                    </div>
                </div>
                <div class="content-group">
                    <h4>Thêm module cho ứng dụng</h4>
                    <p>Ứng dụng của bạn cần hiển thị các thông tin và vị trí hiển thị ra ngoài website cho người dùng.
                        Vậy hãy thêm các modules phù hợp cho ứng dụng</p>
                    <p>- Một module được thêm cần có 2 trường mặc định là name và status ( 0/1 ). </p>
                    <p>- Ví dụ: Ứng dụng khuyến mãi cần tạo 1 module với tên chương trình, thời gian khuyến mãi,
                        ...vv</p>
                    <p>Để thêm ứng dụng, sử dụng thư viện 'App_Setting', hãy import sử dụng thư viện này vào controller
                        của bạn: use App_Api\App_Setting; </p>
                    <div class="group-code">
                         <textarea class="code-area" name="code">
<?php

// Import thư viện App_Setting
use App_Api\App_Setting;

class ControllerExtensionAppstoreFlashSale extends Controller
{
    public function addModule(){
        // Khai báo thư viện
        $setting = new App_Setting($this->registry);

        /* Add module
        Biến đầu tiên là app_code, biến thứ 2 là dữ liệu từ form mà bạn muốn nhập vào thông tin module của mình như:
        Tên module, status, ngày hết hạn,vv.. */

        $setting->addModule('flash_sale', $this->request->post);
    }
}
?>
</textarea>
                    </div>
                </div>
                <div class="content-group">
                    <h4>Chỉnh sửa modules cho ứng dụng</h4>
                    <p>Trước hết hãy lấy các thông tin về module với module_id của module cần chỉnh sửa</p>
                    <div class="group-code">
                        <textarea class="code-area" name="code">
<?php

// Import thư viện App_Setting
use App_Api\App_Setting;

class ControllerExtensionAppstoreFlashSale extends Controller
{
    public function editModule(){
        // Get module
        // $this->request->get['module_id']: lấy module_id của module cần chỉnh sửa

        // Khai báo thư viện
        $setting = new App_Setting($this->registry);
        // Edit module
        $setting->editModule($this->request->get['module_id'], $this->request->post);
    }
}
?>
</textarea>
                    </div>
                </div>
                <div class="content-group">
                    <h4>Xóa module</h4>
                    <p>Để xóa 1 module, sử dụng hàm deleteModule trong model: App_Setting</p>
                    <div class="group-code">
                        <textarea class="code-area" name="code">
<?php

// Import thư viện App_Setting
use App_Api\App_Setting;

class ControllerExtensionAppstoreFlashSale extends Controller
{
    public function deleteModule(){
        // Khai báo thư viện
        $setting = new App_Setting($this->registry);
        // Delete module
        $setting->deleteModule($this->request->get['module_id']);
    }
}
?>
</textarea>
                    </div>
                </div>
                <div class="content-group">
                    <h4>Cài đặt vị trí hiển thị</h4>
                    <p>Tại trang chỉnh sửa module hãy import layout chỉnh sửa vị trí hiển thị module mà Onshop đã cung
                        cấp sẵn.</p>
                    <div class="group-code">
                        <textarea class="code-area" name="code">
<?php
class ControllerExtensionAppstoreFlashSale extends Controller
{
    function editModule()
    {
        ...
        // Thông tin modulue
        $config = [
                'app' => 'your_app_code',
                'module_id' => $this->request->get['module_id']
            ];
        // Layout cài đặt vị trí hiển thị module
        $data['app_config'] = $this->load->controller('common/app_config/setTheme',$config);

        $data['custom_header'] = $this->load->controller('common/custom_header');
        $data['custom_column_left'] = $this->load->controller('common/custom_column_left');
        $data['footer'] = $this->load->controller('common/footer');
        $this->response->setOutput($this->load->view('extension/appstore/your_app_code/edit_module',$data));
    }
}
?>
</textarea>
                    </div>
                    <div class="feature-img">
                        <img src="src/img/app_config.jpg">
                    </div>
                    <p>Khi đó trang chỉnh sửa module của bạn sẽ có 2 phần: </p>
                    <p> - Phần 1: Để chỉnh sửa thông tin module.</p>
                    <p> - Phần 2: Để người dùng cài đặt vị trí hiển thị module trên trang mong muốn.</p>
                </div>
                <div class="content-group">
                    <h4>Lấy danh sách modules của ứng dụng</h4>
                    <p>Để lấy danh sách modules chúng ta dựa vào "app_code" như sau: </p>
                    <div class="group-code">
                        <textarea class="code-area" name="code">
<?php

// Import thư viện App_Setting
use App_Api\App_Setting;
...
// Khai báo thư viện
$setting = new App_Setting($this->registry);

// Lấy danh sách modules
$modules = $setting->getModulesByCode('your_app_code');

//Thông tin của mỗi module đều được lưu vào biến setting dưới dạng json. Để xuất ra thông tin làm như sau:
foreach ($modules as $module) {
    if ($module['setting']) {
        $setting_info = json_decode($module['setting'], true);
        $name_module = $setting_info['name'];
        $status = $setting_info['status'];
    } else {
        $setting_info = array();
    }
}
?>
</textarea>
                    </div>
                </div>
                <div class="content-group">
                    <h4>Lấy dữ liệu của Shop</h4>
                    <p>Onshop cung cấp các thư viện để nhà phát triển có thể lấy dữ liệu của shop sử dụng cho các tính
                        năng của ứng dụng.</p>
                    <p>Danh sách các dữ liệu hiện đang được Onshop cung cấp: Product, Catalog, Order.</p>

                </DIV>
            </div>
        </section>
        <section id="introduce4">
            <div class="section-title">
                <h2 class="mb-4">Hiển thị ứng dụng</h2>
            </div>
            <div class="section-content">
                <div class="content-group">
                    <p>Ứng dụng của bạn đã được cài đặt và cấu hình vị trí hiển thị cho các module mà người dùng mong
                        muốn tại phần Amin.</p>
                    <p>Để hiển thị ứng dụng của bạn cho người dùng website, hãy tiếp tục với các thành phần tại mục
                        Catalog</p>
                </div>
                <div class="content-group">
                    <h4>Controller</h4>
                    <p>Các thao tác của người dùng đến ứng dụng của bạn đều được truyền đến controller của app tại
                        catalog/controller/extension/appstore/{your_app_code.php}</p>
                    <p>Hàm index sẽ được Onshop mặc định gọi đến để hiển thị module ứng dụng của bạn đúng với vị trí
                        hiển thị được cấu hình.</p>
                    <p>Tại hàm này, hãy lấy các dữ liệu cần thiết và trả về 1 view tương ứng để hiển thị ứng dụng cho
                        người dùng.</p>
                    <div class="group-code">
<textarea class="code-area" name="code">
<?php

// Import thư viện App_Setting
use App_Api\App_Setting;
class ControllerExtensionAppstoreYourAppCode extends Controller
{
    public function index()
    {
        if (isset($this->request->get['module_id'])) {
            $module_id = $this->request->get['module_id'];

            // Lấy thông tin của module bằng thư viện App_Config
            $setting = new App_Setting($this->registry);
            $data = $setting->getModule($module_id);

            $data['link_detail'] = array(
                'text' => 'Trang Detail',
                'href' => $this->url->link('extension/appstore/your_app_code/detail','',true)
            );

            // Trả về view hiển thị nội dung Module
            $this->response->setOutput($this->load->view('extension/appstore/your_app_code', $data));
        }
    }
}
?>
</textarea>
                    </div>
                </div>
                <div class="content-group">
                    <h4>Model</h4>
                    <p>Nếu ứng dụng của bạn sử dụng các bảng dữ liệu được tạo khi cài đặt ứng dụng, hãy khai báo và tạo
                        file model tại catalog/model/extension/appstore/your_app_code.php </p>
                </div>
                <div class="content-group">
                    <h4>View</h4>
                    <p>Trang thể hiện nội dung của module</p>
                    <div class="group-code">
<textarea class="code-area" name="code">
<!-- Class name : content_app_render là class cha - bắt buộc, bọc toàn bộ nội dung -->
<div class="content_app_render">
    <!-- Nội dung module cần hiển thị, ví dụ -->
    <section class="block-saleoff-product pt-5 mb-3 onshop-block-hot-product">
        <div class="container">
            <h2 class="block-title header-font mb-4 pt-3"><span>{{name}}</span></h2>
            <a href="{{ link_to_detail }}">
                <div class="block-content row" style="width: 100%;height: 150px;background: #cccccc;">

                </div>
            </a><!-- End block-content -->
        </div> <!-- End container -->
    </section>
</div>
</textarea>
                    </div>
                    <p>Nếu ứng dụng của bạn cần tạo ra 1 đường link mới và 1 trang hiển thị mới, hãy tạo đường link này
                        trong controller và import các layout mặc định của website</p>
                    <div class="group-code">
<textarea class="code-area" name="code">
<?php


class ControllerExtensionAppstoreYourAppCode extends Controller
{
    public function detailApp()
    {
        // $products: Danh sách sản phẩm khuyến mãi
        $data['products'] = $products;
        /* base layout */
        $data['footer'] = $this->load->controller('common/footer');
        $data['header'] = $this->load->controller('common/header');

        $this->response->setOutput($this->load->view('extension/appstore/your_app_code/view_app_detail', $data));
    }
}
?>
</textarea>
                    </div>
                    <p>Trang view_app_detail: </p>
                    <div class="group-code">
<textarea class="code-area" name="code">
{{ header }}

<main class="content-wrapper clearfix">
    <div class="container">
        <!-- VIẾT NỘI DUNG HIỂN THỊ TẠI ĐÂY -->
    </div>
</main>
    <!-- End content wrapper -->

{{ footer }}
</textarea>
                    </div>
                </div>
            </div>

        </section>
        <section id="introduce5">
            <div class="section-title">
                <h2 class="mb-4">Đóng gói ứng dụng</h2>
            </div>
            <div class="section-content">
                <p>Để đóng gói ứng dụng, trước tiên bạn hãy tạo file install.xml ngang hàng với thư mục App</p>
                <p>Nội dung file install như sau</p>
                <div class="group-code">
<textarea class="code-area" name="code">
<?xml version="1.0" encoding="utf-8"?>
    <modification>
    <name>APP NAME</name>
    <version>1.0.1</version>
    <author>Onshop Asia group</author>
    <link>https://novaon.asia</link>
        <code>app_code</code>
    <description>APP DESCRIPTION</description>
    <file path="admin/controller/extension/appstore/your_app_code.php">
        <operation>
            <search><![CDATA[ if ($this->user->hasPermission('access', 'marketplace/extension')) { ]]></search>
            <add position="after"><![CDATA[
                $marketplace[] = array(
                    'name'     => "Appstore",
                    'href'     => $this->url->link('marketplace/extension&type=appstore', 'user_token=' . $this->session->data['user_token'], true),
                    'children' => array()
                );
            ]]></add>
        </operation>
    </file>
</modification>
</textarea>
                </div>
                <p>Sau đó hãy zip folder App và file install.xml thành 1 file zip có dạng như sau:
                    your_app_code.ocmod.zip</p>
                <p>Gửi file zip này đến Onshop, chúng tôi sẽ tiến hành kiểm thử ứng dụng và thông báo lại kết quả với
                    bạn .</p>
            </div>
        </section>
    </div>
</div>
</body>
<script type="text/javascript" src="src/js/jquery.min.js"></script>
<script type="text/javascript" src="src/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="src/js/main.js"></script>
<script>
    var defaul = $('.code-area');
    for (var i = 0; i < defaul.length; i++) {
        var editor = CodeMirror.fromTextArea(defaul[i], {
            lineNumbers: true,
            readOnly: 'nocursor',
            mode: "php",
            matchBrackets: true
        });
    }
</script>
</html>
